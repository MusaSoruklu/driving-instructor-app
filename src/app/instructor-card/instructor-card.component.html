<div class="instructor-card">
    <div class="instructor-info">
        <div class="instructor-image-details">
            <div class="instructor-image">
                <img [src]="instructor.imageUrl" alt="Instructor Image">
            </div>
            <div class="instructor-details">
                <h3 class="instructor-name">{{ instructor.name }}</h3>
                <div class="instructor-rating">
                    <span class="rating-icon-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-0.02 0.16 18.03 17.01" aria-hidden="true"
                            data-test-id="ratings-star-filled"
                            class="c-ficon c-ficon--star-filled RestaurantRating_c-restaurantCard-rating-star_1CqWE">
                            <defs>
                                <path id="star-filled-a"
                                    d="m12 17.3 4.8 2.8a.7.7 0 0 0 1-.7L16.5 14l4.3-3.7a.7.7 0 0 0-.4-1.2l-5.6-.5-2.2-5.1a.7.7 0 0 0-1.2 0L9.2 8.6l-5.6.5a.7.7 0 0 0-.4 1.2L7.5 14l-1.3 5.4a.7.7 0 0 0 1 .7l4.8-2.8z">
                                </path>
                            </defs>
                            <use fill="#2068b9" fill-rule="evenodd" transform="translate(-3 -3)" href="#star-filled-a">
                            </use>
                        </svg>
                    </span>
                    <span class="is-visuallyHidden">{{ averageRating }} stars out of 5</span>
                    <data value="{{ averageRating }}" class="rating-mean">{{ averageRating | number:'1.1-1' }}</data>
                    <span class="rating-divider">/</span>
                    <data value="5" class="rating-outOf">5</data>
                    <span>(<data value="{{ totalReviews }}" class="rating-count">{{ totalReviews }}</data>)</span>
                </div>
                <div class="instructor-price">
                    <span class="pound-sign">
                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 500 500">
                            <g transform="translate(0,-552.36218)" id="layer1">
                                <path
                                    d="m 301.29681,788.55573 0,32.9956 -81.5918,0 c 5.99351,17.19988 8.99033,31.20133 8.99048,42.0044 l 0,0.60424 c -1.5e-4,21.9972 -11.59682,46.79576 -34.79004,74.39576 -9.20421,11.20611 -21.20371,24.20659 -35.99854,39.00146 23.5961,-15.60053 47.99182,-23.40082 73.18726,-23.40088 14.0013,6e-5 30.40143,3.00299 49.20044,9.00879 21.99685,6.39653 37.79883,9.59477 47.406,9.59473 16.00316,4e-5 32.60471,-5.99971 49.80469,-17.99927 l 25.19531,39.60571 c -22.80303,22.39993 -49.00539,33.59983 -78.60717,33.59983 -17.60277,0 -42.99947,-5.603 -76.19019,-16.8091 l -11.40747,-4.1931 c -13.19594,-4.4067 -26.39783,-6.6101 -39.60571,-6.6101 -21.1915,0 -42.98713,7.4036 -65.38696,22.2107 l -28.8025,-39.6057 c 40.79584,-35.20501 64.79484,-65.40518 71.99708,-90.60058 2.00185,-7.20202 3.00283,-14.80089 3.00292,-22.79664 -9e-5,1.5e-4 -9e-5,-0.20127 0,-0.60424 l 0,-0.60425 c -9e-5,-15.19759 -4.80355,-30.79816 -14.4104,-46.80176 l -65.991206,0 0,-32.9956 48.596196,0 c -18.39605,-30.39526 -28.59501,-52.19089 -30.59693,-65.38697 -0.8057,-3.60078 -1.20853,-7.60468 -1.20849,-12.01172 l 0,-6.00586 c -4e-5,-39.59926 16.00336,-71.99669 48.01025,-97.19238 26.4037,-20.80035 57.80015,-31.20073 94.18945,-31.20117 l 0.60425,0 c 45.20242,4.4e-4 80.20604,14.80145 105.01099,44.40308 l 10.19897,14.99633 c 10.79072,18.39636 16.38763,44.99545 16.79077,79.79737 l -52.7893,0 c -1.59938,-61.59632 -28.80272,-92.39463 -81.61011,-92.39502 -35.59584,3.9e-4 -60.59582,12.59803 -75,37.79297 -6.39658,11.20639 -9.59482,24.01156 -9.59473,38.41552 l 0,0.58594 c -9e-5,15.21026 4.40054,31.21366 13.20191,48.01025 l 0,0.60425 0.60424,0.58594 c 1.59902,3.60134 3.79629,8.00197 6.5918,13.2019 l 5.40161,9.00879 9.59473,16.79078 z" />
                            </g>
                        </svg>
                    </span>
                    <span class="price-number">{{ instructor.price }}/Hour</span>
                </div>
            </div>
        </div>
        <div class="calendar-and-summary">
            <div class="calendar-container">
                <div class="date-time-container">
                    <mat-form-field>
                        <mat-label>Choose a date</mat-label>
                        <input matInput [matDatepicker]="id" [formControl]="selectedDateControl">
                        <mat-datepicker-toggle matSuffix [for]="id"></mat-datepicker-toggle>
                        <mat-datepicker [dateClass]="dateClass" #id></mat-datepicker>
                    </mat-form-field>
                    <mat-form-field class="transmission-container">
                        <mat-label>Transmission</mat-label>
                        <mat-select [(value)]="selectedTransmission">
                            <mat-option *ngFor="let trans of instructor.transmission" [value]="trans">
                                {{ trans }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
            <div class="duration-time-container">
                <div class="time-container">
                    <mat-form-field>
                        <mat-label>Select time</mat-label>
                        <mat-select (selectionChange)="onTimeSelected($event)">
                            <mat-option *ngFor="let time of times" [value]="time.label" [disabled]="!time.available"
                                [class.available-time]="time.available">
                                {{ time.label }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <mat-form-field class="lesson-duration">
                    <mat-label>Lesson duration</mat-label>
                    <mat-select [(value)]="lessonDuration">
                        <mat-option *ngFor="let duration of instructor.lessonDuration" [value]="duration">
                            {{ duration }} Hour(s)
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <!-- Lesson Summary Card -->
            <mat-card *ngIf="selectedTime" class="lesson-summary-card">
                <mat-card-header>
                    <mat-card-title>Lesson Summary</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <div class="summary-item">
                        <mat-icon aria-hidden="false" aria-label="Lesson Date Icon">today</mat-icon>
                        <span>Lesson Date: {{ selectedDate | date }}</span>
                    </div>
                    <div class="summary-item">
                        <mat-icon aria-hidden="false" aria-label="Lesson Time Icon">access_time</mat-icon>
                        <span>Lesson Time: {{ selectedTime }}</span>
                    </div>
                    <div class="summary-item">
                        <mat-icon aria-hidden="false" aria-label="Lesson Duration Icon">timer</mat-icon>
                        <span>Lesson Duration: {{ lessonDuration }} Hour(s)</span>
                    </div>
                    <div class="summary-item">
                        <mat-icon aria-hidden="false" aria-label="Transmission Icon">drive_eta</mat-icon>
                        <span>Transmission: {{ selectedTransmission }}</span>
                    </div>
                    <div class="summary-item">
                        <i class="fa-solid fa-sterling-sign"></i>
                        <fa-icon [icon]="faSterlingSign"></fa-icon>
                        <!-- <mat-icon aria-hidden="false" aria-label="Total Price Icon">currency_pound</mat-icon> -->
                        <span>Total Price: Â£{{ getTotalPrice() }}</span>
                    </div>
                </mat-card-content>
                <mat-card-actions align="end">
                    <button mat-raised-button color="primary" (click)="addToCart()">Add to cart</button>
                </mat-card-actions>
            </mat-card>
        </div>
    </div>
</div>